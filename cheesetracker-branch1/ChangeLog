Fri Aug 3 04:54:44 EDT 2007 J Phelps <godless@users.sf.net>
	* dds_helpers.cpp (get_sample_data,set_sample_data):
	Added support for multi-channel samples, at last!!!!
Fri Aug 3 02:44:54 EDT 2007 J Phelps <godless@users.sf.net>
	* sample_data.h
	  sample_data.cpp (get_current_pos): Changed return type
	from size_t to ptrdiff_t.
	* tracker_voice.h: Changed type of Tracker_Voice::current_index
	from size_t to ptrdiff_t.
Fri Aug 3 01:54:44 EDT 2007 J Phelps <godless@users.sf.net>
	* sample_viewer.cpp (paintEvent): Fixed fencepost bug
	that was causing the GNU vector class's array bounds
	checking to trip.
	* mdi_main_window.cpp: Updated version and website strings.
Wed Aug 1 02:02:12 EDT 2007 J Phelps <godless@users.sf.net>
	* sample_data_fixedpoint.h (fixedpoint_loop): Copied in
	the version of fixedpoint_loop() from Revision 57.
	* sample_data.h: Changed type of current_pos from size_t
	to ptrdiff_t.
	* sample_data_fixedpoint.h (fixedpoint_loop): Restored the
	"sustaining" argument.
	* tracker_voice.cpp (add_to_mix_buffer): fixedpoint_loop() is
	called with "false" as the argument, until the code to load
	sustain loops from files is implemented.
Mon Jul 30 12:32:46 EDT 2007 J Phelps <godless@users.sf.net>
	* tracker_voice.cpp (add_to_mix_buffer): Added 1 to
	calculation of the number of "virtual samples", as in
	cheesetracker-0.9.9. This was thought to be an off-by-one
	bug, but it is now known that this is required for looping
	to work properly.
Mon Jul 30 03:37:11 EDT 2007 J Phelps <godless@users.sf.net>
	* sample_data.cpp (Copy constructor): Fixed a bug where
	copy-constructed Sample_Data structures don't allocate
	a new mutex, and therefore crash upon deletion.
Wed Jun 27 10:10:49 EDT 2007 J Phelps <godless@users.sf.net>
	* loader_raw.cpp
	* loader_wav.cpp
	* loader_it_samples.cpp
	* loader_s3m.cpp
	* saver_raw.cpp
	* saver_it.cpp
	* saver_wav.cpp
	* interface.cpp
	* pattern_edit__keys.cpp
	* player_data_events.cpp
	* pattern.cpp
	* player_data_control.cpp
	* tracker_voice.cpp
	* simple_edit_effects.cpp
	* mutex_queue.cpp
	* mutex_lock.cpp
	* mutex_lock.h
	* multireader_lock.cpp
	* sample_data.h
	* sample_data.cpp
	* dds_helpers.cpp
	* sound_driver_manager.cpp
	* sample_viewer.cpp
	* effect_chain_editor.cpp
	* sample_editor_clipboard.cpp
	* mixer_effects_manager.cpp
	* envelope_point_editor.cpp
	* mutex_lock_pthreads.h: Added __FILE__ and __LINE__ arguments
	for all mutex-related types except the multireader lock (which
	is not currently in use). This allows deadlocks to be traced to
	the source file and line where the mutex was obtained.

Mon Jun 25 14:01:30 EDT 2007 J Phelps <godless@users.sf.net>
	* voice.control.h(UsedSample): Changed type of
	Voice_Control::UsedSample::offset to size_t.
	* channel_control.h: Changed type of
	Channel_Control::sample_start_index from Sint32 to size_t.
	* player_data_notes.cpp(process_new_note): Changed
	assignment of (now unsigned) sample_start_index from -1
	to 0.
	* tracker_voice.h: Added new member fixedpoint_offset to
	struct Tracker_Voice::Info.
	* sample_data.h/sample_data_fixedpoint.h: Added new member
	functions get_fixedpoint_offset and set_fixedpoint_offset.
	* tracker_voice.cpp(add_to_mix_buffer): fixedpoint_offset
	from the sample is now preserved across calls to
	add_to_mix_buffer.
Mon Jun 25 06:37:25 EDT 2007 J Phelps <godless@users.sf.net>
	* editor_selection.cpp
	* sample_editor_effects.cpp
	* simple_edit_effects.cpp: Fixed off-by-one for-loop bugs.
	* message_box.h: Added new macro GENERIC_TRY_CATCH to avoid
	reimplementing try-catch blocks in Qt-called functions.

Sun Jun 24 17:51:49 EDT 2007 J Phelps <godless@users.sf.net>
	* tracker_voice.cpp(add_to_mix_buffer): Added use of the GMP
	library. It turns out that even the small amount of fixed-point
	math used here may cause an integer overflow. On 32-bit systems,
	it is possible to simply use 64-bit integers, so #ifdefs were put
	in to that effect. Systems with sizeof(size_t) == sizeof(Uint64)
	need GMP.

	* SConstruct, detect,py: Updated to detect the need for GMP.

Sun Jun 24 02:12:38 EDT 2007 J Phelps <godless@users.sf.net>
	* tracker_voice.cpp(add_to_mix_buffer)
	  sample_data_fixedpoint.h(fixedpoint_loop)
	  sample_data.h: Moved the code that does looping
	  from add_to_mix_buffer to fixedpoint_loop, a new
	  function.
	  
Sat Jun 23 22:38:25 EDT 2007 J Phelps <godless@users.sf.net>
	* resampler_linear.cpp
	  resampler_cosine.cpp
	  resampler_cubic.cpp
	  resampler_raw.cpp: Rewrote the resamplers. They now
	all use the code in resampler_kernel.cpp, which eliminates
	much of the code duplication.
Sat Jun 23 03:51:59 EDT 2007 J Phelps <godless@users.sf.net>
	* tracker_voice.h: Removed unused definition for
	Tracker_Voice::FRACTIONAL.
	* tracker_voice.cpp: Reintroduced SOME of the fixed-point math.

	Removed the variable "debug_int", which was being used to
	trace a memory error (which turned out to be caused by
	improper data sharing between threads).

	* typedefs.h: Macro WARN() does not use ANSI color sequences
	unless ANSI_COLORS is defined.
	* resampler_manager.cpp (get_resampler): Replaced NULL return
	value with an exception-throw, since the NULL return value is
	never checked for.

	New behavior: get_resampler(-1) is equivalent to
	get_resampler(get_default_resampler()), because this is how
	it's used.

	Added "signed" to the parameter type of p_index to show
	that it really _is_ supposed to be signed.
	* resampler_instance.h (set_current_resampler): Replaced use of
	ERROR macro with an exception-throw.
	* resampler_instance.h (mix): Simplified the initialization
	of resampler_idx because it is no longer necessary to call
	Resampler_Manager::get_default_resampler() explicitly.
	* fixedpoint.h: Renamed to sample_data_fixedpoint.h. Preprocessor
	macros will attempt to prevent its inclusion in source files
	other than sample_data.cpp.
	* fixedpoint_defs.h: Created. Macros previously in fixedpoint.h
	have been moved here. It turns out that certain calculations
	in tracker_voice.cpp cannot be made accurately without
	fixed-point math.
	* resampler_kernel.cpp/h: Created. This is a cleaner
	implementation of the algorithm previously implemented
	with macros from helpers.h.
Fri Jun 15 13:24:02 EDT 2007 J Phelps <godless@users.sf.net>
	* cheesetracker/loaders/loader_raw.cpp
	* cheesetracker/loaders/loader_wav.cpp
	* cheesetracker/loaders/loader_it_samples.cpp
	* cheesetracker/loaders/loader_s3m.cpp
	* cheesetracker/savers/saver_raw.cpp
	* cheesetracker/savers/saver_it.cpp
	* cheesetracker/savers/saver_wav.cpp
	* cheesetracker/trackercore/tracker_voice.cpp
	* common/plugins/edit_effects/simple_edit_effects.cpp
	* common/interface__QT/audio/sample_viewer.cpp
	* common/interface__QT/audio/sample_editor_clipboard.cpp
	* common/components/audio/sample_data.h
	* common/components/audio/sample_data.cpp
	* common/components/audio/dds_helpers.cpp:
		Now using Mutex_Lock instead of multireader_lock for
		access to Sample_Data. Since Sample_Data's access
		functions also manage an internal iterator (instead
		of the iterator being in the calling function),
		Sample_Data must be locked during "read" operations
		as well as "write" operations.

	* pattern.cpp (process_retrieve_request): Performance enhancement:
	Removed exception-throwing behavior because all functions that
	use this function were catching the exception and substututing
	"empty_note" for the return value. So now, it simply returns
	empty_note.

Wed Jun 13 01:10:50 EDT 2007 J Phelps <godless@users.sf.net>
	* sample_data.cpp: ASSERT_NOTFIXEDPOINT is defined to nothing
	if NDEBUG is defined.  * common/components/audio/fixedpoint.h:
	Created. The fixed-point functions from sample_data.h are
	defined here, and there are comments that explain how the whole
	fixed-point scheme works.

	Incidentally, another fixedpoint.h file was discovered,
	common/components/data/fixedpoint.h, which defines a fixed-point
	class for which there are no method definitions in the source.

Tue Jun 12 01:32:10 EDT 2007 J Phelps <godless@users.sf.net>
	* multireader_lock.h/cpp: Created. Any number of threads 
	can hold an multireader_lock, and any one process can lock
	all the others out. This allows many threads to read
	a memory region, and one thread to kick the others out
	for writing.

	* sample_data.h: Now uses a multireader_lock instead of
	a mutex.

Mon Jun 11 14:18:56 EDT 2007 J Phelps <godless@users.sf.net>
	* mutex_lock.h: New method on Mutex_Lock_Container: add().
	This makes it possible to put more than one mutex in the
	same Mutex_Lock_Container, all of which will be released
	together.

Mon Jun 11 10:16:54 EDT 2007 J Phelps <godless@users.sf.net>
	* mutex_lock.h: New class, Mutex_Lock_Container, which locks a
	mutex during construction and unlocks it upon destruction.

	* sample_data.h/cpp (lock): Now returns pointer to
	Mutex_Lock_Container.
	* sample_data.h/cpp (unlock): Removed.
	* sample_data.h/cpp (seek): Now returns the final seek position.

	* tracker_voice.cpp (mix): Using sample_data mutexes.

	* tracker_voice.cpp (add_to_mix_buffer): Renamed several
	cryptically-named variables, corrected an OB1 bug in the
	loop-checking logic.

	Removed the 300-page dissertation on fixed-point numbers.

	* sample_data.cpp (resample functions): Commented out the checks
	for sample EOF, as I attempt to make tracker_voice stay
	perfectly within the boundaries.

	* resampler_instance.h/cpp (set_fractional): Removed.

	* : Removed all variables and class members named
	"fractional_size".

Sun Jun 10 13:50:36 EDT 2007 J Phelps <godless@users.sf.net>
	* resampler_manager_new.cpp: Removed.

	* dds_helpers.cpp (get_effect_chain_data): Corrected "taking
	address of temporary" warning from G++ by creating new local
	variable "property_list".

	Also moved curly braces in function definitions to Column 1,
	so that ']]' works in vi.

Sun Jun 10 13:41:59 EDT 2007 J Phelps 
	* loader_xm.cpp (loader_instrument_internal): Moved the
	sample.data.seek(0) call down to the part that loads the sample
	data from the disk.

Sun Jun 10 06:55:15 EDT 2007 J Phelps <godless@users.sf.net>
	* sample_data.cpp (fixedpoint_move_cursor): Removed the for-loop
	that was previously placed around the whole function. This
	for-loop was intended for a different design that never got
	implemented. Instead, it caused a bug.
